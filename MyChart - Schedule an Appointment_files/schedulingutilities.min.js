$$WP.Scheduling=$$WP.Scheduling||{};$$WP.Scheduling.Utilities=$$WP.Scheduling.Utilities||{};$$WPSchedulingUtil=$$WP.Scheduling.Utilities;$$WPSchedulingUtil.ScrollToTopOfPage=function WP$Scheduling$Utilities$ScrollToTopOfPage(){var a=24;if(isDataTile())scrollTopOfTheIframe(0,true);else if($$WP.Utilities.UI.IsSmallScreen())$$WPUtil.SmoothScrollToElementWithOffset($$WPUtil.ScrollableBody(),$afe.select("a[name='maintop']"),a,300);else $$WPUtil.SmoothScrollToElement($$WPUtil.ScrollableBody(),$afe.select("#main"),300)};$$WPSchedulingUtil.RemoveDuplicateElementsFromArray=function WP$Scheduling$Utilities$RemoveDuplicateElementsFromArray(d){for(var c=0,b=null,a=[],c=0;c<d.length;c++){b=d[c];a.indexOf(b)===-1&&a.push(b)}return a};$$WPSchedulingUtil.IsValueInAllArrays=function WP$Scheduling$Utilities$IsValueInAllArrays(d,b){for(var a=0,c=[],a=0;a<b.length;a++){c=b[a];if(c.indexOf(d)===-1)return false}return true};$$WPSchedulingUtil.GetIntersectionOfArrays=function WP$Scheduling$Utilities$GetIntersectionOfArrays(d){var a=0,b=[],e=[],c=null;b=d.shift();for(a=0;a<b.length;a++){c=b[a];$$WPSchedulingUtil.IsValueInAllArrays(c,d)&&e.push(c)}return e};$$WPSchedulingUtil.GetUnionOfArrays=function WP$Scheduling$Utilities$GetUnionOfArrays(e){for(var d=0,a=0,b=[],c=[],d=0;d<e.length;d++){b=e[d];for(a=0;a<b.length;a++)c.indexOf(b[a])===-1&&c.push(b[a])}return c};$$WPSchedulingUtil.DoAllArraysContainTheSameValues=function WP$Scheduling$Utilities$DoAllArraysContainTheSameValues(a){var b=$$WPSchedulingUtil.GetUnionOfArrays(a),c=$$WPSchedulingUtil.GetIntersectionOfArrays(a);return b.length>0&&b.length===c.length};$$WPSchedulingUtil.ConstructAppointmentStringHtml=function WP$Scheduling$Utilities$ConstructAppointmentStringHtml(e,q,p,n,g){var m="@MYCHART@LINKEDPROVIDER@",c="@MYCHART@PROVIDER@",a=$$WP.Strings.getNamespace("Scheduling"),o="library.svg#hyperlink",j="",d="",i="",h="",l="",k="",f="",b=null;g=!!g;a.addMnemonics({"@MYCHART@DEPARTMENT@":{Value:q.Name,EncodingType:$$WP.Strings.EncodingTypes.HTML},"@MYCHART@REASONFORVISIT@":{Value:p,EncodingType:$$WP.Strings.EncodingTypes.HTML}});if(n)if(g){b=document.createElement("use");k=makeStaticImageLink(o);b.setAttribute("xlink:href",k);if(WP.DOM.Browser.isIE){$$WP.Svg.Helpers.loadSingleSvgIcon(b);f=new Handlebars.SafeString(b.innerHTML)}else f=new Handlebars.SafeString(b.outerHTML);a.addMnemonic(c,e.Name,$$WP.Strings.EncodingTypes.HTML);h=a.getString("ProviderDetailsTooltip");l=a.getString("ProviderDetailsLabel");i='<a class="providerBioLink" href="'+makeLink(e.WebPageUrl)+'" aria-label="'+l+'" target="_blank" title="'+h+'">'+HTMLEncode(e.Name)+'<svg class="jumpArrow" aria-hidden="true">'+f+"</svg></a>";a.addMnemonic(m,i,$$WP.Strings.EncodingTypes.None);d="ConfirmRfvWithLinkedProvider"}else{a.addMnemonic(c,e.Name,$$WP.Strings.EncodingTypes.HTML);d="ConfirmProviderRfv"}else{a.addMnemonic(c,"",$$WP.Strings.EncodingTypes.HTML);d="ConfirmRfv"}j=a.getString(d);a.removeMnemonic(c);a.removeMnemonic(m);a.removeMnemonic("@MYCHART@DEPARTMENT@");a.removeMnemonic("@MYCHART@REASONFORVISIT@");return j};$$WPSchedulingUtil.BuildProvidersFiltered=function WP$Scheduling$Utilities$BuildProvidersFiltered(h,g,i,d,c,f){for(var a=[],e={},b=0;b<c.length;b++)e[c[b].ID]=true;if(h&&i)a=d.RequestProviderDepartmentPairs;else a=d.AllProviderDepartmentPairs;return $$WPSchedulingUtil.AddProvidersFromProviderDepartmentPairs(a,g,e,f)};$$WPSchedulingUtil.AddProvidersFromProviderDepartmentPairs=function WP$Scheduling$Utilities$AddProvidersFromProviderDepartmentPairs(e,h,f,g){for(var c=null,a=null,b=[],d=0;d<e.length;d++){c=e[d];if(h&&!f[c.DepartmentId])continue;a=c.Provider;(g||!a.OtherOption)&&b.indexOf(a)===-1&&b.push(a)}return b};$$WPSchedulingUtil.GetMinutesAndHoursFromMinutes=function $$WPSchedulingUtil$GetMinutesAndHoursFromMinutes(b){var e="",c="",a=$$WP.Strings.getNamespace("Scheduling"),f=Math.floor(b/60),d=b%60;if(!b||b<=0)return"";a.addMnemonics({"@MYCHART@HOURS@":{Value:f,EncodingType:$$WP.Strings.EncodingTypes.HTML},"@MYCHART@MINUTES@":{Value:d,EncodingType:$$WP.Strings.EncodingTypes.HTML}});c=$$WPSchedulingUtil.GetDurationStringResourceName(f,d);e=a.getString(c);a.removeMnemonic("@MYCHART@HOURS@");a.removeMnemonic("@MYCHART@MINUTES@");return e};$$WPSchedulingUtil.GetDurationStringResourceName=function $$WPSchedulingUtil$GetDurationStringResourceName(b,a){return b>1?a>0?"DurationHoursAndMinutes":"DurationHours":b===1?a>0?"DurationHourAndMinutes":"DurationOneHour":"DurationMinutes"};$$WPSchedulingUtil.CanUsePermissionsApi=function $$WPSchedulingUtil$CanUsePermissionsApi(){return typeof navigator.permissions==="object"};$$WPSchedulingUtil.CheckIfGeolocationPermissionsAreDenied=function $$WPSchedulingUtil$CheckIfGeolocationPermissionsAreDenied(a){if(!$$WPSchedulingUtil.CanUsePermissionsApi())return;navigator.permissions.query({name:"geolocation"}).then(function(b){b.state==="denied"&&a()})};$$WPSchedulingUtil.HandleStickyBanner=function $$WPSchedulingUtil$HandleStickyBaner(){setTimeout(function(){$afe.jq(window).trigger("handleStickyBanner")},0)};$$WPSchedulingUtil.GetDateFieldValidationSettings=function $$WPSchedulingUtil$GetDateFieldValidationSettings(b,a,c){return new $$WP.FormValidation.ValidationSettings({required:c,isDate:true,minDate:b,maxDate:a})};$$WPSchedulingUtil.FormatDteAsDate=function $$WPSchedulingUtil$FormatDteAsDate(c){var b=null,a="";if(!$$WPUtil.IsNullOrEmpty(c)){b=new $$WP.I18N.Date(formatDate(WP.Utils.dte2date(c)),"string");a=$$WP.I18N.formatPatientGivenDate(b.DateObject)}return a};$$WPSchedulingUtil.SetPreloginTimeout=function $$WPSchedulingUtil$SetPreloginTimeout(){var a=true,b;function popupWarning(){$$WPUtil.quickPopup(new $$WPComp.TimeoutWarningComponent({SecondsLeft:30,isPreLogin:a}),{DontMatchColumnHeights:a})}function resetTimer(){clearTimeout(b);b=setTimeout(popupWarning,6e5)}if(!$$WP.Utilities.UI.IsLoggedIn){resetTimer();document.addEventListener("click",resetTimer,a);document.addEventListener("keydown",resetTimer,a);document.addEventListener("scroll",resetTimer,a)}};$$WPSchedulingUtil.GetEndpointUrl=function $$WpSchedulingUtil$GetEndpointUrl(a,b){return b.IsAnonymous?"Scheduling/Anonymous/"+a:"Scheduling/"+a};$$WPSchedulingUtil.SetUpInstructions=function $$WPSchedulingUtil$SetUpInstructions(c){var d=":has(.instructionContent)",e,f,a=$afe.select("#apptinstructions .visitinstructionscontent"),b=$afe.select("#deptinstructions .visitinstructionscontent");b=b.not(d);a=a.not(d);if(!c)c=$$WPSchedulingUtil.SetUpInstructionsViewModel(a,b);a.length>0&&new $$WP.Visits.PatientInstructionController(a,c.PatientInstructions);if(c.ShowDepartmentDirections&&b.length>0){$$WP.Strings.setDefaultNamespace("Visits");e=c.DepartmentDirections.join("</br>");f=$$WP.Strings.get("ViewFullDirectionsButtonText");new $$WP.Visits.PatientInstructionController(b,e,null,f)}};$$WPSchedulingUtil.SetUpInstructionsViewModel=function $$WPSchedulingUtil$SetUpInstructionsViewModel(b,c){var a={};if(b.length>0)a.PatientInstructions=b[0].innerHTML;if(c.length>0){a.DepartmentDirections=[c[0].innerHTML];if(a.DepartmentDirections)a.ShowDepartmentDirections=true}return a};Handlebars.registerHelper("durationInHoursAndMinutes",$$WPSchedulingUtil.GetMinutesAndHoursFromMinutes)