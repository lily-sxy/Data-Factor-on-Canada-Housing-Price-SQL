$$WPControl.SignupController=function WPControl$SignupController(e,b){var a=this;a.Controllers$Controller(e);a._context=a;var d=a;if(b._useInlineLogin)a._useInlineLogin=true;if(b&&b._successFunction&&typeof b._successFunction==="function")a._successFunction=b._successFunction;a._$mainContainer=$$WPUtil.GetUniqueJQueryById(a._GUID,"mychart-signup-container");$$WPUtil.AjaxifyForm(a._GUID,$$WPUtil.GetUniqueJQueryById(a._GUID,"Signup"),function(a){d._HandleErrors(a,d)},a._successFunction,$$WPUtil.CallbackTypeEnum.Authenticate);$$WPUtil.SetupRadioLabels();a._SetupAccessibleRequiredFieldLabels();a._SetupSignupSteps();a._PayorExampleCards();a._SetupOnBlurValidation();a._SetupInsuranceValidation();var c=$afe.select("body");(c.hasClass("isInside")||c.hasClass("isPrelogin")&&!c.hasClass("embedded"))&&window.addEventListener("resize",$.proxy(function(){$$WPUtil.GetUniqueJQueryById(this._GUID,"slider").css("left",-this.GetStepPosition(this._currentStep))},a));$afe.select("input:text").on("blur",function(){this.value=this.value.trim()});a._IsInitialized=true};$$WPControl.SignupController.prototype={_IsInitialized:false,_GUID:"D72B7F4E-B2DD-4A94-8A76-DC628995805C_signup",_$mainContainer:null,_context:null,_successFunction:null,_useInlineLogin:false,_SetupAccessibleRequiredFieldLabels:function Epic$PatientAccess$Controllers$SignupController$_SetupAccessibleRequiredFieldLabels(){var a=$$WPUtil.GetStringResource(this._GUID,"requiredLabel");this._$mainContainer.find(".required").each(function(){$afe.jq(this).safeAppend(dangerou$.parseHtml('<span class="clearlabel required-cleartext">'+a+"</span>"))})},_SetupSignupSteps:function Epic$PatientAccess$Controllers$SignupController$_SetupSignupSteps(){var k="stepindicator",j=".completeworkflow",h="hidden",g="click",e="disabled",b=false,d=true,n="credentials",m="insurance",a=this,f=a,c=-1;a._stepIds=[];if($$WPUtil.GetUniqueJQueryById(a._GUID,"landing").length){c=c+1;a._stepIds[c]="landing"}c=c+1;a._stepIds[c]="userinfo";if($$WPUtil.GetUniqueJQueryById(a._GUID,m).length){c=c+1;a._stepIds[c]=m}if($$WPUtil.GetUniqueJQueryById(a._GUID,n).length){c=c+1;a._stepIds[c]=n}a._lastStepIndex=c;a.ScrollToStep(0);function prevStepClick(a){a.preventDefault();f._currentStep>0&&f.ScrollToStep(f._currentStep-1,d);return b}function nextStepClick(a){a.preventDefault();f._currentStep<f._lastStepIndex&&f.ScrollToStep(f._currentStep+1,d);return b}function stepIndicatorClick(a){a.preventDefault();!($afe.jq(this).hasClass("current")||$afe.jq(this).hasClass(e))&&f.ScrollToStep($afe.jq(this).index(),d);return b}if(a._useInlineLogin)$afe.select('[id*="loginIntro"] > .button').off(g).on(g,function(){$afe.jq(this).parent().addClass(h);$afe.jq(this).parent().parent().children(j).css("visibility","visible")});for(var i=0;i<a._stepIds.length;i++){var l=a._GUID+"_"+a._stepIds[i];!("boxShadow"in document.body.style)&&$$WPUtil.GetUniqueJQueryById(a._GUID,a._stepIds[i]).addClass("bordered");$$WPUtil.GetUniqueJQueryById(l,"prevstep").filter(":not(.prevMainStep)").off(g).on(g,prevStepClick);$$WPUtil.GetUniqueJQueryById(l,"nextstep").off(g).on(g,nextStepClick);$$WPUtil.GetUniqueJQueryById(l,k).off(g).on(g,stepIndicatorClick).removeClass(h);!$$WPUtil.GetUniqueJQueryById(a._GUID,a._stepIds[i]).find(".required").length&&$$WPUtil.GetUniqueJQueryById(a._GUID,a._stepIds[i]).find("div.requiredHelp").addClass(h)}$$WPUtil.isBrowserCapableOf("input",{type:"tel"})&&$afe.select('.signupStep.userinfo input[id$="Phone"]').each(function(){$afe.jq(this).safeReplaceWith($afe.jq(this).clone(d).safeAttr("type","tel"))});$$WPUtil.isBrowserCapableOf("input",{type:"email"})&&$afe.select(".signupStep.userinfo input#Email").each(function(){$afe.jq(this).safeReplaceWith($afe.jq(this).clone(d).safeAttr("type","email"))});$$WPUtil.GetUniqueJQueryById(a._GUID,"submit").off(g).on(g,function(i){i.preventDefault();for(var c=0;c<f._stepIds.length;c++){var a=f._GUID+"_"+f._stepIds[c],g=$$WPUtil.GetUniqueJQueryById(a,k);g.removeClass("haserrors");g.find("span.validation").addClass(h);$$WPUtil.GetUniqueJQueryById(a,"validation-summary-errors").empty();$$WPUtil.GetUniqueJQueryById(a,"clear-validation-summary-errors").empty()}$afe.select(j).prop(e,d);$afe.select("#State").prop(e,b);$afe.select("#Race").prop(e,b);$afe.select("#Ethnicity").prop(e,b);$afe.select("#PreferredLanguage").prop(e,b);$$WPUtil.GetUniqueJQueryById(f._GUID,"Signup").submit();return b});a.MatchStepHeights()},ScrollToStep:function Epic$PatientAccess$Controllers$SignupController$ScrollToStep(b,p,n){var m="prevstep",l="nextstep",d="visibility",k="aria-hidden",j="offscreen",i="tabindex",a=this,c,f;$$WPUtil.GetUniqueJQueryById(a._GUID,a._stepIds[a._currentStep]).safeAttr(i,"");if(b>a._currentStep){var e=a._currentStep,h=false;while(e<b&&!h)if(a._ValidateRequiredFields(e))e=e+1;else h=true;if(e===a._currentStep){!h&&$$WPUtil.GetUniqueJQueryById(a._GUID,a._stepIds[e]).safeAttr(i,-1).focus();a._ScrollToTopOrFirstInvalidField();return}else b=e}if($afe.select(".signupStep.offscreen").css("display")!=="none")for(c=0;c<a._stepIds.length;c++){f=a._GUID+"_"+a._stepIds[c];(b>a._currentStep&&c>a._currentStep||b<a._currentStep&&c>=b)&&$afe.select("#"+f).removeClass(j).removeAttr(k)}var g=a,o=$$WPUtil.GetUniqueJQueryById(a._GUID,a._stepIds[b]);a._currentStep=b;for(c=0;c<a._stepIds.length;c++){f=a._GUID+"_"+a._stepIds[c];$$WPUtil.GetUniqueJQueryById(f,"content").css(d,"");$$WPUtil.GetUniqueJQueryById(f,l).css(d,"");c>0&&$$WPUtil.GetUniqueJQueryById(f,m).css(d,"")}$$WPUtil.GetUniqueJQueryById(a._GUID,"submit").css(d,"");$$WPUtil.GetUniqueJQueryById(a._GUID,"slider").animate({left:-a.GetStepPosition(b)},function(){var e="transform",c="hidden";for(var a=0;a<g._stepIds.length;a++){var f=g._GUID+"_"+g._stepIds[a];$afe.select("#"+f).toggleClass(j,a!==b).safeAttr(k,a!==b);if(a!==b){$$WPUtil.GetUniqueJQueryById(f,"content").css(d,c);$$WPUtil.GetUniqueJQueryById(f,l).css(d,c);a>0&&$$WPUtil.GetUniqueJQueryById(f,m).css(d,c)}}p&&!h&&o.safeAttr(i,-1).focus();g._ScrollToTopOrFirstInvalidField();g.UpdateNavigation(b);n&&typeof n==="function"&&n.apply(g);if(self!==top&&WP.DOM.Browser.isChrome){var q=$afe.select("#CAPTCHA iframe");q.css(e,"translateY(-100vh)");setTimeout(function Epic$PatientAccess$Controllers$SignupController$ResetCaptchaIframePosition(){q.css(e,"")},10)}})},_ScrollToTopOrFirstInvalidField:function Epic$PatientAccess$Controllers$SignupController$ScrollToTopOrFirstInvalidField(){if($afe.select(".signupStep.offscreen").css("display")!=="none")return;var b=0,a=$afe.select(".input-validation-error").first();if(a.length>0)b=a.get(0).offsetTop-60;$afe.select("html, body, .slider").scrollTop(b)},GetStepPosition:function Epic$PatientAccess$Controllers$SignupController$GetStepPosition(a){var b=$afe.select(".signupStep").outerWidth(true);return a*b},UpdateNavigation:function Epic$PatientAccess$Controllers$SignupController$UpdateNavigation(e){var i="disabled",h="nextstep",c="visibility",a=this,g=a._GUID+"_"+a._stepIds[e],j;if(window.matchMedia)j=window.matchMedia("only screen and (max-width: 699px)").matches;e>0&&$$WPUtil.GetUniqueJQueryById(g,"prevstep").css(c,"");if(e<a._lastStepIndex){$$WPUtil.GetUniqueJQueryById(g,h).css(c,"");$$WPUtil.GetUniqueJQueryById(a._GUID,"submit").css(c,"hidden")}else{$$WPUtil.GetUniqueJQueryById(g,h).css(c,"hidden");$$WPUtil.GetUniqueJQueryById(a._GUID,"submit").css(c,"")}for(var f=0;f<a._stepIds.length;f++){var d=$$WPUtil.GetUniqueJQueryById(a._GUID,a._stepIds[f]+"_stepindicator"),b=d.find("span.status");if(f===e){d.addClass("current").removeClass(i);dangerou$.setHtml(b,b.safeAttr("data-active"))}else{d.removeClass("current");if(d.hasClass(i))dangerou$.setHtml(b,b.safeAttr("data-disabled"));else dangerou$.setHtml(b,b.safeAttr("data-inactive"))}}a.MatchStepHeights()},MatchStepHeights:function Epic$PatientAccess$Controllers$SignupController$MatchStepHeights(){$$WPUtil.GetUniqueJQueryById(this._GUID,"slider").trigger("matchCardHeights")},_SetupOnBlurValidation:function Epic$PatientAccess$Controllers$SignupController$_SetupOnBlurValidation(){var a=this;for(var c=0;c<a._stepIds.length;c++){var b=a._GUID+"_"+a._stepIds[c],f=$$WPUtil.GetUniqueJQueryById(b,"validation-error"),e=$$WPUtil.GetUniqueJQueryById(b,"validation-summary-errors"),d=$$WPUtil.GetUniqueJQueryById(a._GUID,"hidden-validation-summary-errors").find(".validation-summary-errors");$$WPUtil.GetUniqueJQueryById(b,"content").find(".required").each(a._BindOnBlurValidation(a,f,e,d,b))}},_BindOnBlurValidation:function Epic$PatientAccess$Controllers$SignupController$_BindOnBlurValidation(e,a,b,d,c){return function(){var j=".required.input-validation-error",g="input-validation-error",f="hidden",i="required",h="content",k=this;switch($afe.jq(k).get(0).tagName){case"LABEL":var p=$afe.jq(k).safeAttr("for"),m=$$WPUtil.GetUniqueJQueryById(c,h).find('[name="'+p+'"]');if(m.length)m.on("blur keyup change",{$label:$afe.jq(k)},function(k){if(!k.data.$label.hasClass(i))return;if(k.keyCode===9)return;var l=!a.hasClass(f)&&!d.length;if(!e._ValidateRequiredField(m)){a.removeClass(f);b.addClass(f);k.data.$label.addClass(g);$afe.jq(this).addClass(g)}else if(l){k.data.$label.removeClass(g);$afe.jq(this).removeClass(g);if(!$$WPUtil.GetUniqueJQueryById(c,h).find(j).length){a.addClass(f);b.removeClass(f)}}});break;case"LEGEND":var n=$afe.jq(k),o=n.parent("fieldset"),l=n.next("div").find(".tbContainer");if(l.length)l.on("mouseup touchend",{$label:n,$fieldset:o,$container:l},function(k){window.setTimeout(function(){if(!k.data.$label.hasClass(i))return;var l=!a.hasClass(f)&&!d.length;if(!k.data.$container.find("label.focused").length)if(!e._ValidateRequiredField(k.data.$container)){a.removeClass(f);b.addClass(f);k.data.$label.addClass(g);k.data.$fieldset.addClass(g)}else if(l){k.data.$label.removeClass(g);k.data.$fieldset.removeClass(g);if(!$$WPUtil.GetUniqueJQueryById(c,h).find(j).length){a.addClass(f);b.removeClass(f)}}},10)})}}},_SetupInsuranceValidation:function Epic$PatientAccess$Controllers$SignupController$_SetupInsuranceValidation(){var A='option[value="',q="option",z='input[name="InsuranceName"]',a="hidden",i=".required-cleartext",f="input-validation-error",e="required-disabled",d="required",n="disabled",y='input[name="GroupID"]',x='input[name="MemberID"]',w='input[name="SubscriberDateOfBirthStr"]',v='input[name="SubscriberName"]',u='input[name="SubscriberID"]',c=$$WPUtil.GetUniqueJQueryById(this._GUID,"insurance_content"),h=c.find('select[name="Payor"]'),r=$$WPUtil.GetUniqueJQueryById(this._GUID,"insurance_insurancename-br");if(h.length){var k=[],j=[],o,m,b=0,g;if(c.find(u).length){k[b]=c.find(u);j[b]=c.find('label[for="SubscriberID"]');b=b+1}if(c.find(v).length){k[b]=c.find(v);j[b]=c.find('label[for="SubscriberName"]');b=b+1}if(c.find(w).length){k[b]=c.find(w);j[b]=c.find('label[for="SubscriberDateOfBirthStr"]');b=b+1}if(c.find(x).length){k[b]=c.find(x);j[b]=c.find('label[for="MemberID"]');b=b+1}if(c.find(y).length){k[b]=c.find(y);j[b]=c.find('label[for="GroupID"]');b=b+1}for(g=0;g<b;g++){k[g].prop(n,true);if(j[g].hasClass(d)){j[g].removeClass(d).addClass(e).removeClass(f);j[g].find(i).addClass(a);k[g].removeClass(f)}}if(c.find(z).length){o=c.find(z);m=c.find('label[for="InsuranceName"]');if(h.val()!=="-2"){o.addClass(a);m.addClass(a);r.addClass(a);m.removeClass(d).addClass(e).removeClass(f);m.find(i).addClass(a);o.removeClass(f)}}h.on("change",{$subFields:k,$subFieldLabels:j,$insuranceName:o,$insuranceNameLabel:m,$insuranceNameBr:r,count:b},function(b){var c;if(b.data.$insuranceName&&b.data.$insuranceNameLabel)if($afe.jq(this).val()==="-2"){b.data.$insuranceName.removeClass(a);b.data.$insuranceNameLabel.removeClass(a);b.data.$insuranceNameBr.removeClass(a);if(b.data.$insuranceNameLabel.hasClass(e)){b.data.$insuranceNameLabel.removeClass(e).addClass(d);b.data.$insuranceNameLabel.find(i).removeClass(a)}navigator.userAgent.toLowerCase().indexOf("firefox")>-1&&b.data.$insuranceName.focus()}else{b.data.$insuranceName.addClass(a);b.data.$insuranceNameLabel.addClass(a);b.data.$insuranceNameBr.addClass(a);if(b.data.$insuranceNameLabel.hasClass(d)){b.data.$insuranceNameLabel.removeClass(d).addClass(e).removeClass(f);b.data.$insuranceNameLabel.find(i).addClass(a);b.data.$insuranceName.removeClass(f)}}if($afe.jq(this).val()==="-1"||$afe.jq(this).val()==="-3")for(c=0;c<b.data.count;c++){b.data.$subFields[c].prop(n,true);b.data.$subFields[c].val("");if(b.data.$subFieldLabels[c].hasClass(d)){b.data.$subFieldLabels[c].removeClass(d).addClass(e).removeClass(f);b.data.$subFieldLabels[c].find(i).addClass(a);b.data.$subFields[c].removeClass(f)}}else for(c=0;c<b.data.count;c++){b.data.$subFields[c].prop(n,false);if(b.data.$subFieldLabels[c].hasClass(e)){b.data.$subFieldLabels[c].removeClass(e).addClass(d);b.data.$subFieldLabels[c].find(i).removeClass(a)}}});var l=$$WPUtil.queryString("payor");if(l.indexOf(",")>-1){var B=l.split(",");h.find(q).hide();for(g=0;g<B.length;g++)h.find(A+B[g]+'"]').show();var p=h.find(q).not('[style*="display: none"]');if(!p.length){h.find(q).show();l=""}else if(p.length===1)l=p.safeAttr("value");else{l="";var t=h.find('option[style*="display: none"]');if(t.length){t.remove();h.val("")}}}if(!$$WPUtil.IsNullOrEmpty(l)){var s=h.find(A+l+'"]');s.length&&h.val(l).change().hide().safeAfter(dangerou$.parseHtml('<span id="'+this._GUID+'_static-payor" class="static-payor">'+s.get(0).innerHTML+"</span>"))}}},_ValidateRequiredFields:function Epic$PatientAccess$Controllers$SignupController$_ValidateRequiredFields(l){var a="hidden",d=this,j=d,i=true,c=d._GUID+"_"+d._stepIds[l],b=$$WPUtil.GetUniqueJQueryById(c,"validation-error"),g=$$WPUtil.GetUniqueJQueryById(c,"validation-summary-errors"),f=$$WPUtil.GetUniqueJQueryById(c,"clear-validation-summary-errors"),k=$$WPUtil.GetUniqueJQueryById(d._GUID,"hidden-validation-summary-errors").find(".validation-summary-errors"),h=!b.hasClass(a)&&!k.length;$$WPUtil.GetUniqueJQueryById(c,"content").find(".required").each(function(){var d="input-validation-error",e=$afe.jq(this),f=true;switch(e.get(0).tagName){case"LABEL":var n=e.safeAttr("for"),k=$$WPUtil.GetUniqueJQueryById(c,"content").find('[name="'+n+'"]');if(k.length){f=j._ValidateRequiredField(k);if(!f)k.addClass(d);else h&&k.removeClass(d)}break;case"LEGEND":var m=e.parent("fieldset"),l=e.next("div").find(".tbContainer");if(l.length)f=j._ValidateRequiredField(l);if(!f)m.addClass(d);else h&&m.removeClass(d)}if(!f){b.removeClass(a);g.addClass(a);e.addClass(d);i=false}else h&&e.removeClass(d)});if(i){b.addClass(a);g.removeClass(a)}var e=g.html();if((!e||!e.length)&&!b.hasClass(a))e=b.html();dangerou$.setHtml(f,e);f.safeAttr("tabindex","-1");f.focus();return i},_ValidateRequiredField:function Epic$PatientAccess$Controllers$SignupController$_ValidateInputField(a){return a.is("input, textarea")?a.val().length&&a.val().replace(/\s/g,"").length:a.is("select")?a.prop("multiple")===true?!jQuery.isEmptyObject(a.val()):a.val()!=="-1":a.is(".tbContainer")?a.find(":checked").length>0:true},_HandleErrors:function Epic$PatientAccess$Controllers$SignupController$_HandleErrors(c,n){var e=true,d="disabled",a=this,h=[],f=a._lastStepIndex,b;$afe.select(".completeworkflow").prop(d,false);$afe.select("#State").prop(d,e);$afe.select("#Race").prop(d,e);$afe.select("#Ethnicity").prop(d,e);$afe.select("#PreferredLanguage").prop(d,e);c.details==="SYNC-CHART"&&a._SyncPatient(c.syncInfo);c.details==="MULTIPLE-MATCHES-FOUND"&&a._EndWorkflow("StopScheduling");c.details==="MAX-APPTS-SCHEDULED"&&a._EndWorkflow("TooManyAppointmentsErrorMessage");for(var m in c){var g;if(m==="RECAPTCHA")g=$afe.select("#CAPTCHA");else g=$afe.select('[name="'+m+'"]');if(g.length){g.prop("readonly",false).prop(d,false);var l=g.parents(".signupStep");if(l.length)for(b=0;b<a._stepIds.length;b++)if(l.hasClass(a._stepIds[b])){h[b]=1;break}}}for(b=0;b<h.length;b++)if(h[b]){var i=a._GUID+"_"+a._stepIds[b],j=$$WPUtil.GetUniqueJQueryById(i,"stepindicator");j.addClass("haserrors");j.find("span.validation").removeClass("hidden");var k=$$WPUtil.GetUniqueJQueryById(a._GUID,"hidden-validation-summary-errors").find(".validation-summary-errors").html();dangerou$.setHtml($$WPUtil.GetUniqueJQueryById(i,"validation-summary-errors"),k);dangerou$.setHtml($$WPUtil.GetUniqueJQueryById(i,"clear-validation-summary-errors"),k);if(f>b)f=b}if(f===a._lastStepIndex){$$WPUtil.GetUniqueJQueryById(a._GUID,a._stepIds[f]).safeAttr("tabindex",-1).focus();a._HandleReCaptcha(c)}else n.ScrollToStep(f,e,function(){this._HandleReCaptcha(c)})},_SyncPatient:function Epic$PatientAccess$Controllers$SignupController$_SyncPatient(a){var d,h,c,b,f,g,e,i;d=a.patientCid;b=a.homeDeploymentInternalId;f=a.priority;g=a.syncType;e=$.proxy(this._HandleSyncPatientCompleted,this);h=null;c=null;var i=new $$WP.ChartSync.ChartSyncController;i.syncPatient(d,h,c,b,f,g,e)},_HandleSyncPatientCompleted:function Epic$PatientAccess$Controllers$SignupController$_HandleSyncPatientCompleted(h,e){var b=this,c,i,a,d;a={};if(e===$$WP.ChartSync.Synchronization.SyncStatusEnum.UpToDate){c=$$WPUtil.GetUniqueJQueryById(b._GUID,"Signup");a.url=makeLink($afe.jq(c).safeAttr("postsyncaction"));a.type=$afe.jq(c).safeAttr("method");a.sendFormData=false;d=b;$$WPUtil.SubmitAjaxifiedForm(a,b._GUID,c,function(a){d._HandleErrors(a,d)},b._successFunction,$$WPUtil.CallbackTypeEnum.Authenticate)()}else b._EndWorkflow("StopScheduling")},_EndWorkflow:function Epic$PatientAccess$Controllers$SignupController$_EndWorkflow(a){$$WPUtil.quickMessageBoxByEnum($$WP.Strings.get(a,"OpenScheduling"),$$WPUtil.quickMessageBoxByEnum.typeEnum.Ok);setTimeout(function(){$afe.select(".Popup .clearlabel").focus()},0)},_HandleReCaptcha:function Epic$PatientAccess$Controllers$SignupController$_HandleReCaptcha(){var a=$afe.select("#CAPTCHA");typeof grecaptcha!=="undefined"&&grecaptcha&&a.length>0&&a.get(0).innerHTML.replace(/\s/g,"")!==""&&grecaptcha.reset()},_PayorExampleCards:function Epic$PatientAccess$Controllers$SignupController$_PayorExampleCards(){var b="click",d="previmage",a=this,e=this._GUID+"_insurance",c=$$WPUtil.GetStringResource(this._GUID,"defaultInsuranceImg");$afe.select("#Payor").change(function(){$$WPUtil.GetUniqueJQueryById(e,d).addClass("disabled");a._UpdateImage(1,c,1);a._CheckNextImage(0,c,1,1,1)});$$WPUtil.GetUniqueJQueryById(e,d).off(b).on(b,function(b){b.preventDefault();a._CheckNextImage(a._currentImage,c,-1,1)});$$WPUtil.GetUniqueJQueryById(e,"nextimage").off(b).on(b,function(b){b.preventDefault();a._CheckNextImage(a._currentImage,c,1,1)})},_UpdateImage:function Epic$PatientAccess$Controllers$SignupController$_UpdateImage(h,f,i){var a="hidden",e="background-image",d="insurance_sampleimage",c=this,j=h+i,b="EXAMPLE-CARD-"+$afe.select("#Payor").val()+"-"+h;b=$$WPUtil.GetStringResource(this._GUID,b);if($$WPUtil.IsNullOrEmpty(b))b=f;var g=new Image;g.onload=function(){var g=$$WPUtil.GetUniqueJQueryById(c._GUID,d);c._currentImage=h;if(b===f){g.css(e,"");g.addClass(a)}else{g.css(e,'url("'+b+'")');g.removeClass(a)}c.MatchStepHeights()};if(b===f)g.onerror=function(){var b=$$WPUtil.GetUniqueJQueryById(c._GUID,d);b.css(e,"");b.addClass(a);c.MatchStepHeights()};else g.onerror=function(){var b=$$WPUtil.GetUniqueJQueryById(c._GUID,d);c._UpdateImage(j,f,i);b.removeClass(a)};g.src=b},_CheckNextImage:function Epic$PatientAccess$Controllers$SignupController$_CheckNextImage(p,k,f,n,o){var a="hidden",d=".disabled-cleartext",b="disabled",i=this,h=i,m=i._GUID+"_insurance",e=$$WPUtil.GetUniqueJQueryById(m,"nextimage"),c=$$WPUtil.GetUniqueJQueryById(m,"previmage"),g=p+f,j="EXAMPLE-CARD-"+$afe.select("#Payor").val()+"-"+g;j=$$WPUtil.GetStringResource(i._GUID,j);if($$WPUtil.IsNullOrEmpty(j)){if(f>0){e.addClass(b);e.find(d).removeClass(a)}else{c.addClass(b);c.find(d).removeClass(a)}if(c.hasClass(b)&&e.hasClass(b)){c.addClass(a);e.addClass(a)}else{c.removeClass(a);e.removeClass(a)}i.MatchStepHeights()}else{var l=new Image;l.onload=function(){if(n){h._UpdateImage(g,k,f);h._CheckNextImage(g,k,f);if(f>0)if(o){c.addClass(b);c.find(d).removeClass(a)}else{c.removeClass(b);c.find(d).addClass(a)}else{e.removeClass(b);e.find(d).addClass(a)}}else if(f>0){e.removeClass(b);e.find(d).addClass(a)}else{c.removeClass(b);c.find(d).addClass(a)}if(c.hasClass(b)&&e.hasClass(b)){c.addClass(a);e.addClass(a)}else{c.removeClass(a);e.removeClass(a)}h.MatchStepHeights()};l.onerror=function(){h._CheckNextImage(g,k,f,n,o)};l.src=j}},ResetForm:function Epic$PatientAccess$Controllers$SignupController$ResetForm(a){var o=".required-cleartext",l="required-disabled",k="required",e="hidden",n="validation-summary-errors",b="input-validation-error",d=$$WPUtil.GetUniqueJQueryById(a._GUID,"Signup");if($$WPUtil.queryString("public")!=="1"){d.find("#NationalId").val("");a._HandleReCaptcha();a.ScrollToStep(0);return}d.get(0).reset();d.find("label").each(function(){var c=$afe.jq(this).safeAttr("for"),a=d.find('[name="'+c+'"]');a.length&&a.removeClass(b);$afe.jq(this).removeClass(b)});d.find("span.field-validation-error").each(function(){$afe.jq(this).removeClass("field-validation-error").addClass("field-validation-valid").empty()});for(var c=0;c<a._stepIds.length;c++){var h=a._GUID+"_"+a._stepIds[c],t=$$WPUtil.GetUniqueJQueryById(h,"validation-error"),s=$$WPUtil.GetUniqueJQueryById(h,n),r=$$WPUtil.GetUniqueJQueryById(h,"clear-validation-summary-errors");t.addClass(e);s.empty();r.empty();$$WPUtil.GetUniqueJQueryById(h,"stepindicator").removeClass("haserrors")}var m=$$WPUtil.GetUniqueJQueryById(a._GUID,"hidden-validation-summary-errors").find(".validation-summary-errors");m.length&&m.removeClass(n).addClass("validation-summary-valid");d.find("legend").each(function(){var c=$afe.jq(this),d=c.parent("fieldset"),a=c.next("div").find(".tbContainer");a.length&&a.find(".selected").each(function(){$afe.jq(this).removeClass("selected")});c.removeClass(b);a.removeClass(b)});var p=$$WPUtil.GetStringResource(a._GUID,"defaultInsuranceImg");a._UpdateImage(1,p,1);a._CheckNextImage(0,p,1,1,1);var g=$$WPUtil.GetUniqueJQueryById(a._GUID,"insurance_content");if(g.length){var j=g.find('input[name="InsuranceName"]'),f=g.find('label[for="InsuranceName"]');if(j.length){j.addClass(e);f.addClass(e);if(f.hasClass(k)){f.removeClass(k).addClass(l).removeClass(b);f.find(o).addClass(e);j.removeClass(b)}}}var q=["SubscriberID","MemberID","GroupID"];for(c=0;c<q.length;c++){var i=g.find('label[for="'+q[c]+'"]');if(i.length&&i.hasClass(l)){i.removeClass(l).addClass(k);i.find(o).removeClass(e)}}a._HandleReCaptcha();a.ScrollToStep(0)},setSelectedSlot:function Epic$PatientAccess$Controllers$SignupController$setSelectedSlot(c,a){var b="";b=a.SlotProviderId;if($$WPUtil.IsNullOrEmpty(b))b=a.ProviderId;$afe.select("#DepartmentIdForPatientCreate").val(c.departmentid);$afe.select("#AppointmentProviderId").val(b);$afe.select("#AppointmentVisitTypeId").val(a.VisitTypeId);$afe.select("#AppointmentTime").val(a.AppointmentTime);$afe.select("#AppointmentDate").val(a.Date);$afe.select("#ReservationKey").val(c.ReservationKey);$afe.select("#SessionToken").val(c.SessionToken)}};$$WPControl.SignupController.extend("Controllers.Controller")